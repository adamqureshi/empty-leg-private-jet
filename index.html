<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EMILY‚Ñ¢ ‚Äî Empty‚ÄëLeg Alerts | Fly Swift Tail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Tell EMILY where you are and when you can fly. Get SMS alerts for discounted empty‚Äëleg private jet flights.">
  <style>
    :root{--bg:#0f0f10;--panel:#161718;--ink:#eee;--muted:#a0a6ad;--line:#2a2b2d}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:720px;margin:0 auto;padding:32px 18px 96px}
    header{display:flex;justify-content:space-between;align-items:center;padding:8px 0 16px;border-bottom:1px solid var(--line);margin-bottom:24px}
    .logo{font-weight:700;letter-spacing:.2px}
    .pill{font-size:12px;border:1px solid var(--line);padding:4px 10px;border-radius:999px;color:#b6bcc3;display:inline-flex;gap:6px;align-items:center}
    h1{font-size:28px;line-height:1.15;margin:6px 0 8px}
    p.sub{color:var(--muted);margin:0 0 18px;font-size:15px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:18px}
    .grid{display:grid;gap:14px}
    @media(min-width:540px){.grid-2{grid-template-columns:1fr 1fr}}
    label{display:block;font-size:13px;color:#8f949b;margin:0 0 6px}
    input,select,textarea,button{width:100%;padding:12px 14px;border-radius:10px;border:1px solid var(--line);background:#0b0b0c;color:var(--ink);font-size:16px;outline:none}
    input::placeholder,textarea::placeholder{color:#6b6f75}
    .row{display:flex;gap:10px;align-items:center}
    .row>*{flex:1}
    .hint{font-size:12px;color:#8b8f96;margin-top:6px}
    .cta{margin-top:8px;background:#e9e9ea;color:#111;font-weight:700;border-color:#d7d7d9}
    .cta:active{transform:translateY(1px)}
    .consent{font-size:12px;color:#8b8f96;line-height:1.4;margin-top:6px}
    .sticky{position:sticky;bottom:0;background:linear-gradient(180deg,rgba(15,15,16,0),var(--bg) 30%);padding-top:16px}
    .ok{color:#a5d6a7}
    .warn{color:#ffd54f}
    .err{color:#ff8a80}
    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
    .foot{margin-top:14px;color:#7a7f86;font-size:12px}
    a{color:#fff;text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">Fly Swift Tail</div>
      <div class="pill" id="locStatus">üìç Location not set</div>
    </header>

    <h1>EMILY‚Ñ¢ empty‚Äëleg alerts</h1>
    <p class="sub">Tell EMILY where you can depart and when you're flexible. She‚Äôll text you available <strong>empty‚Äëlegs</strong> (often 30‚Äì70% off) that fit.</p>

    <form id="emilyForm" class="card grid" method="post" action="/api/lead" novalidate>
      <!-- spam honeypot -->
      <input type="text" name="website" class="visually-hidden" tabindex="-1" autocomplete="off">

      <div>
        <label for="origin">Home base (city or airport code)</label>
        <div class="row">
          <input id="origin" name="origin" placeholder="Ex: TEB, VNY, West Palm Beach">
          <button type="button" id="useGeo" class="pill" style="flex:0 0 auto">Use my location</button>
        </div>
        <div class="hint">We attach precise GPS only for matching (never shown publicly).</div>
      </div>

      <div class="grid grid-2">
        <div>
          <label for="earliest">Earliest you can go</label>
          <input type="date" id="earliest" name="earliest">
        </div>
        <div>
          <label for="latest">Latest you can go</label>
          <input type="date" id="latest" name="latest">
        </div>
      </div>

      <div class="grid grid-2">
        <div>
          <label for="seats">Seats needed</label>
          <select id="seats" name="seats" required>
            <option value="">Select‚Ä¶</option>
            <option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option>
          </select>
        </div>
        <div>
          <label for="deal_target">Deal target (optional)</label>
          <select id="deal_target" name="deal_target">
            <option value="">Cheapest available</option>
            <option>Under $3k one‚Äëway</option>
            <option>Under $5k one‚Äëway</option>
            <option>Under $8k one‚Äëway</option>
          </select>
        </div>
      </div>

      <div>
        <label for="phone">Mobile (for SMS alerts)</label>
        <input id="phone" name="phone" inputmode="tel" placeholder="+1 555 123 4567">
        <div class="hint">Reply STOP to opt out.</div>
      </div>

      <div>
        <label for="email">Email (optional)</label>
        <input id="email" name="email" type="email" placeholder="you@email.com">
      </div>

      <div>
        <label for="notes">Anything we should know?</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Open to PBI/FLL/MIA; small dog; golf bags‚Ä¶"></textarea>
      </div>

      <!-- hidden context -->
      <input type="hidden" id="tz" name="timezone">
      <input type="hidden" id="lat" name="lat">
      <input type="hidden" id="lng" name="lng">
      <input type="hidden" id="ua" name="user_agent">
      <input type="hidden" id="utm_source" name="utm_source">
      <input type="hidden" id="utm_medium" name="utm_medium">
      <input type="hidden" id="utm_campaign" name="utm_campaign">

      <div class="consent">
        <label><input type="checkbox" id="consent" required> I agree to receive empty‚Äëleg alerts via SMS/email and to the <a href="/terms" target="_blank" rel="noopener">Terms</a> &amp; <a href="/privacy" target="_blank" rel="noopener">Privacy</a>. Msg &amp; data rates may apply.</label>
      </div>

      <div class="sticky">
        <button class="cta" type="submit" id="submitBtn">Get Empty‚ÄëLeg Alerts</button>
        <div class="foot" id="formStatus" role="status" aria-live="polite"></div>
      </div>
    </form>

    <div style="margin-top:18px;color:#8b8f96;font-size:12px">Prefer predictable rates? Jet Card Exchange‚Ñ¢ coming next.</div>
  </div>

<script>
(function(){
  const qs=(s)=>document.querySelector(s);
  const status=qs('#formStatus');
  const locPill=qs('#locStatus');

  const today=new Date().toISOString().split('T')[0];
  qs('#earliest').min=today; qs('#latest').min=today;

  qs('#tz').value = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
  qs('#ua').value = navigator.userAgent;

  const params = new URLSearchParams(location.search);
  ['utm_source','utm_medium','utm_campaign'].forEach(k=>{ const v=params.get(k); if(v) qs('#'+k).value=v; });

  function setLoc(lat,lng){ qs('#lat').value=lat; qs('#lng').value=lng; locPill.textContent='üìç Location attached'; locPill.classList.add('ok'); }
  qs('#useGeo').addEventListener('click',()=>{
    if(!navigator.geolocation){ locPill.textContent='Location unsupported'; locPill.classList.add('warn'); return; }
    navigator.geolocation.getCurrentPosition(
      (pos)=>setLoc(pos.coords.latitude.toFixed(6),pos.coords.longitude.toFixed(6)),
      ()=>{ locPill.textContent='Location denied'; locPill.classList.add('err'); },
      {enableHighAccuracy:true,timeout:8000}
    );
  });

  function haveContact(){ return !!(qs('#phone').value.trim() || qs('#email').value.trim()); }

  qs('#emilyForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    status.textContent='';

    const hp=e.target.website && e.target.website.value;
    if(hp){ return; }
    if(qs('#seats').value===''){ status.textContent='Please pick seats.'; return; }
    if(!haveContact()){ status.textContent='Add a mobile or email so we can alert you.'; return; }
    if(!qs('#consent').checked){ status.textContent='Please confirm SMS/email consent.'; return; }
    const payload=Object.fromEntries(new FormData(e.target).entries());
    if(payload.earliest && payload.latest && payload.earliest>payload.latest){ status.textContent='Date window looks inverted.'; return; }

    qs('#submitBtn').disabled=true; status.textContent='Saving‚Ä¶';
    try{
      const res=await fetch(e.target.action,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
      if(!res.ok) throw new Error('Server error');
      e.target.reset(); qs('#lat').value=''; qs('#lng').value=''; locPill.textContent='üìç Location not set'; locPill.classList.remove('ok');
      status.textContent='Thanks! EMILY will text you when a matching empty‚Äëleg pops up.';
    }catch(err){
      status.textContent='Could not save right now. You can email ops@flyswifttail.com and we\'ll follow up.';
    }finally{ qs('#submitBtn').disabled=false; }
  });
})();
</script>
</body>
</html>
